CREATE TABLE BALANCE(
    USERID BIGINT ,
    USERBALANCE REAL,
    UNIQUE (USERID)
);

CREATE TABLE RESERVED(
    USERID BIGINT ,
    SERVICEID BIGINT ,
    ORDERID BIGINT,
    SUM REAL,
    CREATED TIMESTAMP DEFAULT NOW()::TIMESTAMP,
    UNIQUE (USERID, SERVICEID, ORDERID)
);

CREATE TABLE FINISHED(
    USERID BIGINT ,
    SERVICEID BIGINT ,
    ORDERID BIGINT,
    SUM REAL,
    UPDATED TIMESTAMP DEFAULT NOW()::TIMESTAMP,
    UNIQUE (USERID, SERVICEID, ORDERID)
);

CREATE TABLE TRANSACTIONS(
    USERID BIGINT ,
    SERVICEID BIGINT DEFAULT 0,
    ORDERID BIGINT DEFAULT 0,
    SUM REAL,
    CREATED TIMESTAMP DEFAULT NOW()::TIMESTAMP ,
    SOURSE VARCHAR DEFAULT 'INTERNAL',
    TYPE VARCHAR DEFAULT 'PAYMENT'
)